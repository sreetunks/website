[
  {{- $sections := default (slice "posts") .Site.Params.mainSections -}}
  {{- $pages := where .Site.RegularPages "Section" "in" $sections -}}
  {{- range $i, $p := $pages.ByDate.Reverse -}}{{ if $i }},{{ end }}
  {{- $tags := slice -}}
  {{- with $p.Params.tags -}}
    {{- range . -}}
      {{- $tags = $tags | append ((printf "%v" .) | lower | replaceRE "\\s+" "-") -}}
    {{- end -}}
  {{- end -}}
  {
    "title": {{ $p.Title | jsonify }},
    "summary": {{ $p.Summary | plainify | jsonify }},
    "date": {{ $p.Date.Format "2006-01-02" | jsonify }},
    "dateShort": {{ $p.Date.Format "2006-01-02" | jsonify }},
    "dateISO": {{ $p.Date.Format "2006-01-02" | jsonify }},
    "year": {{ $p.Date.Format "2006" | jsonify }},
    "author": {{ default site.Params.author $p.Params.author | jsonify }},
    "permalink": {{ $p.RelPermalink | jsonify }},
    "tags": {{ $tags | jsonify }},
    "categories": {{ $p.Params.categories | default (slice) | jsonify }},
    "content": {{ $p.Plain | jsonify }}
  }
  {{- end -}}
]
